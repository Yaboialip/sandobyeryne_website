<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Product Detail - Sando's by Eryne</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Fredoka+One&display=swap');

        body {
            font-family: 'Fredoka One', cursive;
            background-image: url('images/pink_bg.png');
            background-size: 300px 300px;
            background-repeat: repeat;
            background-color: rgba(255, 182, 193, 0.199);
            background-blend-mode: lighten;
            margin: 0;
            padding: 0;
            color: #ff4d88;
            overflow-x: hidden;
            min-height: 100vh;
        }

        header {
            background: linear-gradient(135deg, #ffb6c1, #ff69b4);
            text-align: center;
            padding: 20px 10px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            position: relative;
        }

        .back-btn {
            position: absolute;
            left: 20px;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: 2px solid white;
            padding: 10px 20px;
            border-radius: 25px;
            cursor: pointer;
            font-family: 'Fredoka One', cursive;
            font-size: 14px;
            transition: all 0.3s ease;
            text-decoration: none;
        }

        .back-btn:hover {
            background: white;
            color: #ff4d88;
            transform: translateY(-50%) scale(1.05);
        }

        .cart-icon {
            position: absolute;
            top: 50%;
            right: 20px;
            transform: translateY(-50%);
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: 2px solid white;
            padding: 10px 15px;
            border-radius: 50px;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.3s ease;
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .cart-icon:hover {
            background: white;
            color: #ff4d88;
            transform: translateY(-50%) scale(1.05);
        }

        .cart-count {
            background: #ff4d88;
            color: white;
            border-radius: 50%;
            width: 22px;
            height: 22px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.7rem;
            font-weight: bold;
            animation: pulse 0.3s ease-in-out;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.2); }
            100% { transform: scale(1); }
        }

        .cart-count.updated {
            animation: pulse 0.5s ease-in-out;
        }

        header h1 {
            font-size: 2.5rem;
            color: white;
            margin: 0;
        }

        .product-detail {
            max-width: 1200px;
            margin: 40px auto;
            padding: 0 20px;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 40px;
            align-items: start;
        }

        .product-image {
            background: white;
            border-radius: 30px;
            overflow: hidden;
            box-shadow: 0 8px 24px rgba(255, 105, 180, 0.2);
            position: sticky;
            top: 20px;
        }

        .product-image-container {
            width: 100%;
            height: 400px;
            overflow: hidden;
            background: #f8f9fa;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }

        .product-image img {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
            object-position: center;
            transition: transform 0.3s ease;
        }

        .product-info {
            background: white;
            border-radius: 30px;
            padding: 40px;
            box-shadow: 0 8px 24px rgba(255, 105, 180, 0.2);
            animation: slideInFromRight 0.8s ease-out;
        }

        @keyframes slideInFromRight {
            from {
                opacity: 0;
                transform: translateX(50px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .product-info h2 {
            font-size: 2.5rem;
            color: #ff4d88;
            margin: 0 0 10px 0;
        }

        .price {
            font-size: 2rem;
            color: #ff69b4;
            margin-bottom: 20px;
            font-weight: bold;
        }

        .package-note {
            background: linear-gradient(135deg, #fff3cd, #ffeaa7);
            border: 2px solid #ffc107;
            border-radius: 20px;
            padding: 15px 20px;
            margin: 20px 0;
            font-size: 1rem;
            color: #856404;
            font-family: Arial, sans-serif;
            text-align: center;
            box-shadow: 0 4px 12px rgba(255, 193, 7, 0.2);
        }

        .package-note .highlight {
            font-weight: bold;
            color: #ff4d88;
            font-family: 'Fredoka One', cursive;
        }

        .location-note {
            background: linear-gradient(135deg, #d1ecf1, #bee5eb);
            border: 2px solid #17a2b8;
            border-radius: 20px;
            padding: 15px 20px;
            margin: 20px 0;
            font-size: 1rem;
            color: #0c5460;
            font-family: Arial, sans-serif;
            text-align: center;
            box-shadow: 0 4px 12px rgba(23, 162, 184, 0.2);
        }

        .location-note .highlight {
            font-weight: bold;
            color: #ff4d88;
            font-family: 'Fredoka One', cursive;
        }

        .description {
            font-size: 1.1rem;
            line-height: 1.6;
            color: #666;
            margin-bottom: 30px;
            font-family: Arial, sans-serif;
        }

        .ingredients-section,
        .allergens-section {
            margin-bottom: 30px;
        }

        .ingredients-section h3,
        .allergens-section h3 {
            color: #ff4d88;
            font-size: 1.5rem;
            margin-bottom: 15px;
        }

        .ingredients-list {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }

        .ingredient-tag {
            background: linear-gradient(135deg, #ffb6c1, #ff69b4);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.9rem;
        }

        .allergen-tag {
            background: #ffcccb;
            color: #d32f2f;
            padding: 6px 12px;
            border-radius: 15px;
            font-size: 0.8rem;
            border: 1px solid #d32f2f;
        }

        .order-section {
            background: linear-gradient(135deg, #ffb6c1, #ff69b4);
            padding: 20px;
            border-radius: 20px;
            text-align: center;
            margin-top: 30px;
        }

        .quantity-selector {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            margin: 20px 0;
        }

        .qty-btn {
            background: white;
            color: #ff4d88;
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            font-size: 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .qty-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        .quantity {
            font-size: 1.5rem;
            color: white;
            min-width: 60px;
            text-align: center;
        }

        .order-btn {
            background: white;
            color: #ff4d88;
            border: none;
            padding: 15px 40px;
            font-size: 1.2rem;
            border-radius: 30px;
            cursor: pointer;
            font-family: 'Fredoka One', cursive;
            transition: all 0.3s ease;
            margin-top: 10px;
        }

        .order-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2);
        }

        .heart {
            position: fixed;
            top: -20px;
            font-size: 20px;
            animation: fall linear forwards;
            color: #ff4d88;
            z-index: 0;
        }

        @keyframes fall {
            to {
                transform: translateY(110vh) rotate(360deg);
                opacity: 0;
            }
        }

        .success-animation {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: linear-gradient(135deg, #4CAF50, #45a049);
            color: white;
            padding: 20px 30px;
            border-radius: 20px;
            font-size: 1.2rem;
            z-index: 1000;
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.3);
            animation: successPop 0.6s ease-out;
        }

        @keyframes successPop {
            0% {
                opacity: 0;
                transform: translate(-50%, -50%) scale(0.5);
            }
            50% {
                transform: translate(-50%, -50%) scale(1.1);
            }
            100% {
                opacity: 1;
                transform: translate(-50%, -50%) scale(1);
            }
        }

        @media (max-width: 768px) {
            header {
                padding: 15px 10px;
                text-align: left;
            }

            .back-btn {
                position: static;
                transform: none;
                display: inline-block;
                margin-bottom: 10px;
                padding: 8px 16px;
                font-size: 12px;
            }

            .cart-icon {
                position: absolute;
                top: 15px;
                right: 15px;
                transform: none;
                padding: 8px 12px;
                font-size: 0.9rem;
            }

            .cart-count {
                width: 18px;
                height: 18px;
                font-size: 0.6rem;
            }

            header h1 {
                font-size: 1.8rem;
                margin: 10px 0;
                text-align: center;
            }

            .product-detail {
                grid-template-columns: 1fr;
                gap: 20px;
                margin: 15px auto;
                padding: 0 15px;
            }

            .product-image {
                position: static;
            }

            .product-image-container {
                height: 300px;
            }

            .product-info {
                padding: 25px 20px;
            }

            .product-info h2 {
                font-size: 1.8rem;
                text-align: center;
            }

            .price {
                font-size: 1.4rem;
                text-align: center;
            }

            .package-note,
            .location-note {
                padding: 12px 15px;
                margin: 15px 0;
                font-size: 0.9rem;
            }

            .description {
                font-size: 1rem;
                text-align: center;
            }

            .ingredients-list {
                justify-content: center;
                gap: 8px;
            }

            .ingredient-tag {
                font-size: 0.8rem;
                padding: 6px 12px;
            }

            .allergen-tag {
                font-size: 0.7rem;
                padding: 4px 8px;
            }

            .order-section {
                padding: 15px;
                margin-top: 20px;
            }

            .quantity-selector {
                gap: 20px;
                margin: 15px 0;
            }

            .qty-btn {
                width: 45px;
                height: 45px;
                font-size: 1.3rem;
            }

            .quantity {
                font-size: 1.8rem;
                min-width: 80px;
            }

            .order-btn {
                padding: 12px 30px;
                font-size: 1.1rem;
                width: 100%;
            }
        }

        @media (max-width: 480px) {
            .product-info {
                padding: 20px 15px;
            }

            .product-info h2 {
                font-size: 1.5rem;
            }

            .price {
                font-size: 1.2rem;
            }

            .package-note,
            .location-note {
                padding: 10px 12px;
                font-size: 0.85rem;
            }

            .ingredients-list {
                gap: 6px;
            }

            .ingredient-tag {
                font-size: 0.7rem;
                padding: 4px 8px;
            }

            .product-image-container {
                height: 250px;
            }
        }

        input[type="text"],
        input[type="tel"],
        input[type="email"],
        textarea,
        select {
            font-size: 16px !important;
        }

        * {
            -webkit-tap-highlight-color: rgba(255, 105, 180, 0.3);
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            text-rendering: optimizeLegibility;
        }

        @viewport {
            width: device-width;
            zoom: 1.0;
        }

        @media screen and (orientation: landscape) and (max-height: 500px) {
            header {
                padding: 10px;
            }

            header h1 {
                font-size: 1.5rem !important;
            }

            .cart-icon,
            .back-btn {
                padding: 6px 12px !important;
                font-size: 0.8rem !important;
            }
        }
    </style>
</head>

<body>
    <header>
        <a href="index.html" class="back-btn">← Back</a>
        <a href="cart.html" class="cart-icon">
            🛒 <span class="cart-count" id="cartCount">0</span>
        </a>
        <h1>❤ Product Detail ❤</h1>
    </header>

    <main class="product-detail">
        <div class="product-image">
            <div class="product-image-container">
                <img id="productImage" src="" alt="Product Image">
            </div>
        </div>

        <div class="product-info">
            <h2 id="productName">Loading...</h2>
            <div class="price" id="productPrice">Loading...</div>
            
            <div class="package-note">
                📦 <span class="highlight">1 Pack = 2 Pcs</span> sandwich
            </div>
            
            <div class="location-note">
                📍 <span class="highlight">Jakarta Base Only</span> - Delivery available within Jakarta area
            </div>
            
            <div class="description" id="productDescription">Loading...</div>

            <div class="ingredients-section">
                <h3>Ingredients</h3>
                <div class="ingredients-list" id="ingredientsList">
                    <!-- Ingredients will be loaded here -->
                </div>
            </div>

            <div class="allergens-section">
                <h3>Allergens</h3>
                <div class="ingredients-list" id="allergensList">
                    <!-- Allergens will be loaded here -->
                </div>
            </div>

            <div class="order-section">
                <div class="quantity-selector">
                    <button class="qty-btn" onclick="changeQuantity(-1)">−</button>
                    <div class="quantity" id="quantity">1</div>
                    <button class="qty-btn" onclick="changeQuantity(1)">+</button>
                </div>
                <button class="order-btn" onclick="orderProduct()">Add to Cart</button>
            </div>
        </div>
    </main>

    <script>
        let currentQuantity = 1;
        let currentProduct = null;

        // Product data
        const productsBackup = {
            'mix-sando': {
                name: 'Mix Sando',
                price: 'Rp 50.000',
                image: 'images/mix.png',
                description: 'A colourful fruit sandwich featuring layers of fluffy milk bread, fresh seasonal fruits like strawberry and orange, all nestled in airy whipped cream for a vibrant, sweet, and refreshing treat.',
                ingredients: ['Fluffy milk bread', 'Fresh strawberries', 'Fresh oranges', 'Whipped cream', 'Seasonal fruits'],
                allergens: ['Gluten', 'Dairy']
            },
            'orange-sando': {
                name: 'Orange Sando',
                price: 'Rp 45.000',
                image: 'images/jeruk.png',
                description: 'Fresh, tangy orange segments wrapped in pillowy milk bread and light cream, delivering a refreshing citrus burst.',
                ingredients: ['Fluffy milk bread', 'Fresh orange segments', 'Light whipped cream'],
                allergens: ['Gluten', 'Dairy']
            },
            'strawberry-sando': {
                name: 'Strawberry Sando',
                price: 'Rp 45.000',
                image: 'images/straw.png',
                description: 'A Japanese-style sandwich made with fluffy milk bread, fresh sweet strawberries and lightly whipped cream, creating a soft, fruity, and creamy treat.',
                ingredients: ['Japanese milk bread', 'Fresh strawberries', 'Lightly whipped cream'],
                allergens: ['Gluten', 'Dairy']
            },
            'blueberry-sando': {
                name: 'Blueberry Sando',
                price: 'Rp 45.000',
                image: 'images/blueberry.png',
                description: 'A soft Japanese milk bread sandwich filled with plump, juicy blueberries and smooth whipped cream for a sweet-tart delight.',
                ingredients: ['Japanese milk bread', 'Fresh blueberries', 'Smooth whipped cream'],
                allergens: ['Gluten', 'Dairy']
            },
            'banana-sando': {
                name: 'Banana Sando',
                price: 'Rp 45.000',
                image: 'images/banana.png',
                description: 'Fluffy bread layered with ripe banana slices and creamy whipped filling, offering a naturally sweet and comforting taste.',
                ingredients: ['Fluffy bread', 'Ripe banana slices', 'Creamy whipped filling'],
                allergens: ['Gluten', 'Dairy']
            }
        };

        function loadProduct() {
            // Try to get product ID from URL parameter
            const urlParams = new URLSearchParams(window.location.search);
            const productId = urlParams.get('product');
            
            if (productId && productsBackup[productId]) {
                currentProduct = productsBackup[productId];
                updateProductDisplay();
            } else {
                // Fallback to first product for demo
                currentProduct = productsBackup['mix-sando'];
                updateProductDisplay();
            }
        }

        function updateProductDisplay() {
            if (!currentProduct) return;

            document.getElementById('productName').textContent = currentProduct.name;
            document.getElementById('productPrice').textContent = currentProduct.price;
            document.getElementById('productDescription').textContent = currentProduct.description;
            document.getElementById('productImage').src = currentProduct.image;
            document.getElementById('productImage').alt = currentProduct.name;

            // Update ingredients
            const ingredientsList = document.getElementById('ingredientsList');
            ingredientsList.innerHTML = '';
            currentProduct.ingredients.forEach(ingredient => {
                const tag = document.createElement('div');
                tag.className = 'ingredient-tag';
                tag.textContent = ingredient;
                ingredientsList.appendChild(tag);
            });

            // Update allergens
            const allergensList = document.getElementById('allergensList');
            allergensList.innerHTML = '';
            currentProduct.allergens.forEach(allergen => {
                const tag = document.createElement('div');
                tag.className = 'allergen-tag';
                tag.textContent = allergen;
                allergensList.appendChild(tag);
            });

            document.title = `${currentProduct.name} - Sando's by Eryne`;
        }

        function changeQuantity(change) {
            currentQuantity += change;
            if (currentQuantity < 1) currentQuantity = 1;
            if (currentQuantity > 10) currentQuantity = 10;
            document.getElementById('quantity').textContent = currentQuantity;
        }

        function orderProduct() {
            if (!currentProduct) return;

            // Get existing cart or create empty array
            let cart = [];
            try {
                cart = JSON.parse(localStorage.getItem('cart')) || [];
            } catch (e) {
                cart = [];
            }

            // Check if product already exists in cart
            const existingItemIndex = cart.findIndex(item => item.name === currentProduct.name);
            
            if (existingItemIndex !== -1) {
                // Update quantity of existing item
                cart[existingItemIndex].quantity += currentQuantity;
            } else {
                // Add new item to cart
                cart.push({
                    name: currentProduct.name,
                    price: currentProduct.price,
                    image: currentProduct.image,
                    quantity: currentQuantity
                });
            }

            // Save to localStorage
            try {
                localStorage.setItem('cart', JSON.stringify(cart));
            } catch (e) {
                console.log('localStorage not available, cart stored in memory');
            }

            // Update cart count display
            updateCartCount();

            // Show success animation
            showSuccessMessage();

            // Reset quantity to 1
            currentQuantity = 1;
            document.getElementById('quantity').textContent = currentQuantity;
        }

        function showSuccessMessage() {
            // Create success popup
            const successDiv = document.createElement('div');
            successDiv.className = 'success-animation';
            successDiv.innerHTML = `✅ ${currentQuantity} ${currentProduct.name} added to cart!`;
            document.body.appendChild(successDiv);

            // Animate cart count
            const cartCount = document.getElementById('cartCount');
            cartCount.classList.add('updated');

            // Remove success message and animation class after delay
            setTimeout(() => {
                successDiv.remove();
                cartCount.classList.remove('updated');
            }, 2000);

            // Update button temporarily
            const btn = document.querySelector('.order-btn');
            const originalText = btn.textContent;
            btn.textContent = '✓ Added to Cart!';
            btn.style.background = '#4CAF50';
            btn.style.transform = 'scale(1.1)';

            setTimeout(() => {
                btn.textContent = originalText;
                btn.style.background = 'white';
                btn.style.transform = 'scale(1)';
            }, 2000);
        }

        function updateCartCount() {
            let cart = [];
            try {
                cart = JSON.parse(localStorage.getItem('cart')) || [];
            } catch (e) {
                cart = [];
            }
            
            const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
            document.getElementById('cartCount').textContent = totalItems;
        }

        function createHeart() {
            const heart = document.createElement('div');
            heart.classList.add('heart');
            heart.textContent = '❤';
            heart.style.left = Math.random() * 100 + 'vw';
            heart.style.animationDuration = (2 + Math.random() * 3) + 's';
            document.body.appendChild(heart);
            setTimeout(() => heart.remove(), 5000);
        }

        // Initialize page
        window.addEventListener('DOMContentLoaded', () => {
            loadProduct();
            updateCartCount();
        });
        
        setInterval(createHeart, 800);
    </script>
</body>

</html>